<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Spyglass User Guide</title>
        <meta name="robots" content="noindex" />
        <!-- Custom HTML head -->
<script defer data-domain="docs.spyglass.fyi" src="https://plausible.io/js/script.js"></script>        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="intro.html">Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">1.</strong> Installation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="build.html"><strong aria-hidden="true">1.1.</strong> Building from source</a></li></ol></li><li class="chapter-item expanded "><a href="usage/index.html"><strong aria-hidden="true">2.</strong> Launching &amp; Using Spyglass</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/indexing/local-files.html"><strong aria-hidden="true">2.1.</strong> Indexing local files</a></li><li class="chapter-item expanded "><a href="usage/indexing/bookmarks.html"><strong aria-hidden="true">2.2.</strong> Indexing bookmarks</a></li><li class="chapter-item expanded "><a href="usage/indexing/web.html"><strong aria-hidden="true">2.3.</strong> Indexing website topics/sites</a></li></ol></li><li class="chapter-item expanded "><a href="usage/lenses/index.html"><strong aria-hidden="true">3.</strong> Lenses</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/lenses/community.html"><strong aria-hidden="true">3.1.</strong> Community Lenses</a></li><li class="chapter-item expanded "><a href="usage/lenses/build.html"><strong aria-hidden="true">3.2.</strong> Building your own lens</a></li></ol></li><li class="chapter-item expanded "><a href="usage/plugins/index.html"><strong aria-hidden="true">4.</strong> Plugins</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="usage/plugins/build.html"><strong aria-hidden="true">4.1.</strong> Building Plugins</a></li><li class="chapter-item expanded "><a href="usage/plugins/plugin.html"><strong aria-hidden="true">4.2.</strong> Writing a Plugin</a></li><li class="chapter-item expanded "><a href="usage/plugins/install.html"><strong aria-hidden="true">4.3.</strong> Installing a Plugin</a></li></ol></li><li class="chapter-item expanded "><a href="usage/settings.html"><strong aria-hidden="true">5.</strong> Settings</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Spyglass User Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><a href="https://github.com/spyglass-search/spyglass/actions/workflows/rust.yml"><img src="https://github.com/spyglass-search/spyglass/actions/workflows/rust.yml/badge.svg" alt="check/build workflow" /></a>
<a href="https://discord.gg/663wPVBSTB"><img src="https://img.shields.io/badge/discord-join%20the%20community-blue" alt="" /></a></p>
<blockquote>
<p>Spyglass indexes what <strong>you</strong> want, exposing it to you in a simple &amp; fast interface</p>
</blockquote>
<iframe width="100%" height="512" src="https://www.youtube-nocookie.com/embed/yL7dVWAOhdg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Spyglass is a solution to address the following common issues when searching the web.</p>
<ul>
<li>Do you add terms such as <code>reddit</code> or <code>wiki</code> to your searches to narrow it down?</li>
<li>Do you skip over a full-page of ads before getting to your actual search results?</li>
<li>Do you scroll past dozens of SEO spam pages to find the recipe/review/blog post you were looking for?</li>
<li>Do you get frustrated with overzealous autocorrect on your search terms?</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<blockquote>
<p>⚠️ Spyglass is very much in its early stages, but it’s in a place where it's
functional and can be used to replace basic searches</p>
</blockquote>
<p>Spyglass is supported on all platforms. <a href="https://github.com/spyglass-search/spyglass/releases">The latest release can always be found here</a>.</p>
<table><thead><tr><th>Platform</th><th>Download Link</th></tr></thead><tbody>
<tr><td>Linux (AppImage)*</td><td><a href="https://github.com/spyglass-search/spyglass/releases/download/v2023.3.2/spyglass_23.3.2_amd64.AppImage">spyglass_23.3.2_amd64.AppImage</a></td></tr>
<tr><td>macOS (Intel/ARM)</td><td><a href="https://github.com/spyglass-search/spyglass/releases/download/v2023.3.2/Spyglass_23.3.2_universal.dmg">Spyglass_23.3.2_universal.dmg</a></td></tr>
<tr><td>Windows</td><td><a href="https://github.com/spyglass-search/spyglass/releases/download/v2023.3.2/Spyglass_23.3.2_x64_en-US.msi">Spyglass_23.3.2_x64_en-US.msi</a></td></tr>
</tbody></table>
<ul>
<li>: Linux builds are built &amp; tested on the latest version of Ubuntu. If you're using
a different distro or window manager there may be some differences. Please open an issue
if you find something completely broken.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-from-source"><a class="header" href="#building-from-source">Building from Source</a></h1>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>Make sure you have setup the prerequisites for <a href="https://tauri.app/v1/guides/getting-started/prerequisites">tauri</a>. That should get you most of the way towards the requirements for building
spyglass.</p>
<p>Spyglass uses <a href="https://tailwindcss.com">TailwindCSS</a> for styling within the application. Make sure you
have <a href="https://docs.npmjs.com/getting-started">NPM</a> installed before starting the build.</p>
<p>A quick check-list of things you should have installed before continuing.
At the time of writing, you should be able to see similar versions below:</p>
<pre><code class="language-bash">$&gt; rustc -V
rustc 1.61.0 (fe5b13d68 2022-05-18)

$&gt; cargo --version
cargo 1.61.0 (a028ae42f 2022-04-29)

$&gt; npm --version
8.10.0
</code></pre>
<blockquote>
<p>NOTE: <code>$&gt;</code> represents your command line prompt.</p>
</blockquote>
<p>Finally, let's setup the application dependencies. If you're running on Linux, run
this first for some linux specific system dependencies.</p>
<pre><code class="language-bash">$&gt; make setup-dev-linux
</code></pre>
<p>And finally run these commands to setup the server/client dependencies.</p>
<pre><code class="language-bash">$&gt; make setup-dev
</code></pre>
<h2 id="building-the-application"><a class="header" href="#building-the-application">Building the Application</a></h2>
<p>Run the following to build the application:</p>
<pre><code class="language-bash">$&gt; make build-release
</code></pre>
<p>This will kick off a release build for your platform. Depending on your OS, this
will produce a <code>dmg</code> (macos), <code>msi</code> (windows) or <code>appimage</code> (linux) file.</p>
<h2 id="development-builds"><a class="header" href="#development-builds">Development Builds</a></h2>
<p>When running in development, it is best to have the spyglass client &amp; backend running
in two different terminal tabs/windows. Both will have their own logs that you'll
need to watch.</p>
<p>First, build &amp; run the backend service:</p>
<pre><code class="language-bash">$&gt; cargo run -p spyglass
</code></pre>
<p>Second, build &amp; run the client</p>
<pre><code class="language-bash">$&gt; cargo tauri dev
</code></pre>
<p>If you're actively working on the theming of the application itself, it's best
to have <code>tailwind</code> in watch mode so that the CSS can be continually checked &amp;
built.</p>
<pre><code class="language-bash">$&gt; npx tailwindcss -i ./public/input.css -o ./public/main.css --watch
</code></pre>
<p>If you're working on the default plugins, setup the <code>PLUGINS_DEV_FOLDER</code> variable
inside the <code>Makefile</code> to point to the spyglass dev/debug data folder. This will be
one of the following:</p>
<table><thead><tr><th>Platform</th><th>Path</th></tr></thead><tbody>
<tr><td>linux</td><td><code>/home/&lt;username&gt;/.local/share/spyglass-dev/</code></td></tr>
<tr><td>macOS</td><td><code>/Users/&lt;username&gt;/Library/Application Support/com.athlabs.spyglass-dev/</code></td></tr>
<tr><td>windows</td><td><code>C:\Users\&lt;username&gt;\AppData\Roaming\spyglass-dev\data</code></td></tr>
</tbody></table>
<p>To deploy plugin changes, run the following and restart your dev spyglass instance to reload
the plugins</p>
<pre><code>$&gt; make build-plugins-dev
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="launching--using-spyglass"><a class="header" href="#launching--using-spyglass">Launching &amp; Using Spyglass</a></h1>
<p>After you've successfully <a href="usage/../install.html">installed</a> Spyglass, launch the
application from where you normally find newly installed applications.</p>
<p>If the app has been successfully launched, you'll see a little menubar icon
like the following:</p>
<p align="center">
    <img width="256" src="usage/./../assets/tray-menu.png" alt="macOS menubar icon & menu">
</p>
<blockquote>
<p>On <strong>Windows</strong>, this will appear as a colorful spyglass icon in your system tray (bottom right).</p>
</blockquote>
<p align="center">
    <img width="256" src="usage/./../assets/tray-menu-windows.png" alt="Windows tray icon & menu">
</p>
<blockquote>
<p>On <strong>Ubuntu Linux</strong>, this will appear as a color spyglass icon in the top right.</p>
</blockquote>
<h2 id="opening-the-search-bar"><a class="header" href="#opening-the-search-bar">Opening the search bar</a></h2>
<p align="center">j
    <img src="usage/./../assets/searchbar.png" alt="Searchbar">
</p>
<p>Once launched, press <strong><code>Cmd (Ctrl) + Shift + /</code></strong> to open Spyglass. This hotkey
can be configured in your <a href="usage/./settings.html">settings</a>.</p>
<p>If for some reason this hotkey is not working, you can launch the search bar directly
with the <code>Show search</code> menu item.</p>
<h2 id="finding--applying-a-lens"><a class="header" href="#finding--applying-a-lens">Finding &amp; Applying a lens</a></h2>
<p>Queries prefixed with <code>/</code> will search through your installed lenses. Select the lens
you want to search through and hit <code>Enter</code> to apply it to your current search.</p>
<p align="center">
    <img src="usage/./../assets/searchbar-with-lenses.png" alt="Searchbar with list of lenses">
</p>
<h2 id="selecting-and-opening-a-result"><a class="header" href="#selecting-and-opening-a-result">Selecting and Opening a Result</a></h2>
<p>As you're searching, use the arrow keys to select the result you want and hit<code>Enter</code>
to open the link in your default browser. You may also use your house to click on any
result in the list to do the same thing.</p>
<p align="center">
    <img src="usage/./../assets/search-results.png" alt="Search results">
</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="indexing-local-files"><a class="header" href="#indexing-local-files">Indexing local files</a></h1>
<p>As you're onbarding you'll see the ability to enable local file searching and audio
content indexing as seen below.</p>
<p align="center">
    <img width="512" src="usage/indexing/./../../assets/indexing/enable-indexing.png" alt="Toggle settings in wizard">
</p>
<h2 id="file-searching"><a class="header" href="#file-searching">File Searching</a></h2>
<p>Local file search will, by default, start with your Desktop and your Documents folder.
You can add additional folders in your user settings.</p>
<h3 id="supported-file-formats"><a class="header" href="#supported-file-formats">Supported File Formats</a></h3>
<p>Code file supported is rudimentary and things like symbols / class names / function
names are not yet taken into account.</p>
<p><strong>Code files:</strong></p>
<ul>
<li><code>c</code>, <code>cpp</code></li>
<li><code>js</code>, <code>ts</code></li>
<li><code>rs</code></li>
</ul>
<p>Configuration / text files are treated as standard text &amp; automatically indexed
and searchable.</p>
<p><strong>Config/Text files:</strong></p>
<ul>
<li><code>cfg</code></li>
<li><code>csv</code></li>
<li><code>md</code></li>
<li><code>toml</code></li>
<li><code>txt</code></li>
<li><code>yaml</code>, <code>yml</code></li>
</ul>
<p>Word documents, spreadsheets, and PDFs are also handled automatically their content
immediately searchable.</p>
<p><strong>Supported document formats:</strong></p>
<ul>
<li><code>docx</code>, <code>ods</code></li>
<li><code>xls</code>, <code>xlsx</code></li>
<li><code>pdf</code></li>
</ul>
<p>Additional extensions that you'd like to have indexed can be added through the
user settings.</p>
<h3 id="audio-search"><a class="header" href="#audio-search">Audio Search</a></h3>
<p>If enabled, audio search will automatically transcribe audio from any audio/video
file. This is especially handy if you have saved Zoom meetings, audiobooks, or even
YouTube content that you'd like to search through!</p>
<p>Supported formats:</p>
<ul>
<li><code>aac</code></li>
<li><code>avi</code></li>
<li><code>flac</code></li>
<li><code>m4a</code></li>
<li><code>mp3</code> &amp; <code>mp4</code></li>
<li><code>ogg</code></li>
<li><code>wav</code></li>
<li><code>webm</code></li>
</ul>
<h2 id="adding-folders-to-index"><a class="header" href="#adding-folders-to-index">Adding folders to index</a></h2>
<p>The file indexer plugin will recursively walk through a folder &amp; its' children to
find files. Because of this, you'll only need to add the parent folder of
what you want to index.</p>
<p>For example, if you want to index all the files under <code>/Users/alice/notes/personal</code>
and <code>/Users/alice/notes/work</code>, you only need to add <code>/Users/alice/notes</code>.</p>
<p>To add folders, navigate to the &quot;User Settings&quot; and scroll down to the <code>Folder List</code>
setting. This takes an array of folder strings as seen below:</p>
<p align="center">
    <img width="640" src="usage/indexing/./../../assets/indexing/file-indexer-settings.png" alt="File indexer settings">
</p>
<p>Click the &quot;Add Folder&quot; button to choose a folder to add, save your changes, and Spyglass
will start indexing the contents immediately!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="indexing-bookmarks"><a class="header" href="#indexing-bookmarks">Indexing bookmarks</a></h1>
<p>Indexing bookmarks &amp; adding pages from the browser requires the Spyglass web extension:</p>
<ul>
<li><a href="https://chrome.google.com/webstore/detail/spyglass-search/afhfiojklacoieoanfabefpfngphkmml">Install in Chrome</a></li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/spyglass/">Install in Firefox</a></li>
</ul>
<h2 id="add-a-single-page-to-your-index"><a class="header" href="#add-a-single-page-to-your-index">Add a single page to your index</a></h2>
<p>If you want to add a single page to Spyglass without bookmarking it in your browser,
you can easily do this by navigating to the Spyglass icon &amp; clicking &quot;Add to Spyglass&quot;.</p>
<p align="center">
    <img width="512" src="usage/indexing/./../../assets/bookmarks/add-a-page.png" alt="Adding a single page">
</p>
<p>Once added or if you've already added a page, you can check the status &amp; remove from your
library.</p>
<p align="center">
    <img width="512" src="usage/indexing/./../../assets/bookmarks/already-added.png" alt="Page already added">
</p>
<h2 id="syncing-your-bookmarks"><a class="header" href="#syncing-your-bookmarks">Syncing your bookmarks</a></h2>
<p>Start by toggling the sync button in the &quot;Sync Bookmarks&quot; tab. This will grab all
your bookmarks from the browser and send them to be crawled by Spyglass.</p>
<p align="center">
    <img width="512" src="usage/indexing/./../../assets/bookmarks/sync-bookmarks.png" alt="Syncing all your bookmarks">
</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="indexing-website-topicssites"><a class="header" href="#indexing-website-topicssites">Indexing website topics/sites</a></h1>
<p>There are two ways to start indexing websites you're interested in.</p>
<ol>
<li>First is to install one from our <a href="usage/indexing/../lenses/community.html">list of community built lenses</a></li>
</ol>
<p><img src="usage/indexing/./../../assets/lens-manager.png" alt="Lens manager" /></p>
<ol start="2">
<li><a href="usage/indexing/../lenses/build.html">Building your own lens</a>, which are simple text files which
tell the application what to crawl &amp; index. For example, here is a lens for recipes
that I like to search for on a routine basis:</li>
</ol>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>(
    version: &quot;1&quot;,
    // Be proud of your creation :). Maybe soon we can share these ;)
    author: &quot;Andrew Huynh&quot;,
    name: &quot;recipes&quot;,
    description: Some(r#&quot;
        A curated collection of websites with useful, high-quality recipes.
    &quot;#),
    // Set to false if you want to disable this lens
    is_enabled: true,
    domains: [

        // Major sites that often have really good recipes
        &quot;www.seriouseats.com&quot;,
        &quot;cooking.nytimes.com&quot;,
        ...

        // Specific cuisines/sites that I've found randomly w/ high-quality recipes
        &quot;www.hungryhuy.com&quot;,
        &quot;www.vickypham.com&quot;,
    ],

    urls: [
        // URLs are considered prefixed, i.e. anything that starts w/ the following
        // will be matched and crawled.
        //
        // https://www.reddit.com/r/recipes/ -&gt; matches
        // https://www.reddit.com/r/recipes_not/ -&gt; does not match, notice the end slash.
        &quot;https://www.reddit.com/r/recipes/&quot;,
    ],

    // Rules allow you to refine how the crawler determine whether it should crawl
    // a URL or not.
    rules: [
        // SkipURL is a simple regex (similar to ones in robots.txt) that when matches
        // a URL will skip crawling it.
        //
        // For example, below I'm skipping over any URLs that have the word &quot;broccoli&quot;
        // in the path, despite the benefits to my health.
        SkipURL(&quot;https://www.seriouseats.com/*broccoli*&quot;),
        // Limits the depth of a URL to a certain depth.
        // For example:
        //  - LimitURLDepth(&quot;https://example.com/&quot;, 1) will limit it to https://example.com/&lt;path 1&gt;
        //  - LimitURLDepth(&quot;https://example.com/&quot;, 2) will limit it to https://example.com/&lt;path 1&gt;/&lt;path 2&gt;
        //  - etc.
        // In this case, we're limiting to only https://www.reddit.com/r/recipes/&lt;post&gt; so we don't
        // index too many comments/etc. from reddit.
        LimitURLDepth(&quot;https://www.reddit.com/r/recipes&quot;, 1),
    ]
)
<span class="boring">}
</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="lenses"><a class="header" href="#lenses">Lenses</a></h1>
<p>Spyglass expands on the ideas outlined in <a href="https://brave.com/static-assets/files/goggles.pdf">this paper</a> by the
Brave Search Team to allow users to define what should / should not be crawled
and indexed for topics they're interested in.</p>
<h2 id="managing-your-library"><a class="header" href="#managing-your-library">Managing your library</a></h2>
<p>Open the &quot;My Library&quot; window bygoing into the system tray menu and clicking on
the <code>My Library</code> option. This will open a window like below:</p>
<p align="center">
    <img src="usage/lenses/./../../assets/library-window.png" alt="Lens library window">
</p>
<p>Here you can view the progress of any crawls or lenses being installed. <code>View Details</code>
will bring up the source code for the lens configuration.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="community-lenses"><a class="header" href="#community-lenses">Community Lenses</a></h1>
<p>Spyglass has a small community that has been building lenses for different topics.
You can check out the ones available to download by clicking on &quot;Manage/install lenses&quot;
from the menubar icon to open up the &quot;Lens Manager&quot; as seen below.</p>
<p>Community lenses are downloaded from <a href="https://github.com/spyglass-search/lens-box">spyglass-search/lens-box</a>.</p>
<p><img src="usage/lenses/./../../assets/discover-window.png" alt="Lens manager" /></p>
<p>From here, you can one-click install lenses and the crawler will happily go out and
start indexing.</p>
<h2 id="precrawled-and-ready-to-search"><a class="header" href="#precrawled-and-ready-to-search">Precrawled and ready to search</a></h2>
<p>All community lenses (and soon private lenses) come precrawled. Spyglass will download
the preprocessed content from those sites &amp; use it to update your personal index. Our
crawlers currently crawl things on a monthly basis, but this will continue to improve
as that infrastructure is built out.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-your-own-lens"><a class="header" href="#building-your-own-lens">Building your own lens</a></h1>
<p>You can also create your own lenses. Once created you can drop these in your &quot;lens&quot;
folder, which can be opened through the <code>My Library</code> window.</p>
<p>Here are some examples that I've been personally using:</p>
<h2 id="curated-recipe-searching"><a class="header" href="#curated-recipe-searching">Curated recipe searching</a></h2>
<p>Interested in cooking &amp; recipes? Add a <code>recipe</code> lens which will go index a
curated set of websites with high quality recipes.</p>
<pre><code class="language-rust noplayground">(
    version: &quot;1&quot;,
    // Be proud of your creation :). Maybe soon we can share these ;)
    author: &quot;Andrew Huynh&quot;,
    name: &quot;recipes&quot;,
    description: Some(r#&quot;
        A curated collection of websites with useful, high-quality recipes.
    &quot;#),
    // Set to false if you want to disable this lens
    is_enabled: true,
    domains: [

        // Major sites that often have really good recipes
        &quot;www.seriouseats.com&quot;,
        &quot;cooking.nytimes.com&quot;,
        ...

        // Specific cuisines/sites that I've found randomly w/ high-quality recipes
        &quot;www.hungryhuy.com&quot;,
        &quot;www.vickypham.com&quot;,
    ],

    urls: [
        // URLs are considered prefixed, i.e. anything that starts w/ the following
        // will be matched and crawled.
        //
        // https://www.reddit.com/r/recipes/ -&gt; matches
        // https://www.reddit.com/r/recipes_not/ -&gt; does not match, notice the end slash.
        &quot;https://www.reddit.com/r/recipes/&quot;,
    ],

    // Rules allow you to refine how the crawler determine whether it should crawl
    // a URL or not.
    rules: [
        // SkipURL is a simple regex (similar to ones in robots.txt) that when matches
        // a URL will skip crawling it.
        //
        // For example, below I'm skipping over any URLs that have the word &quot;broccoli&quot;
        // in the path, despite the benefits to my health.
        SkipURL(&quot;https://www.seriouseats.com/*broccoli*&quot;),
        // Limits the depth of a URL to a certain depth.
        // For example:
        //  - LimitURLDepth(&quot;https://example.com/&quot;, 1) will limit it to https://example.com/&lt;path 1&gt;
        //  - LimitURLDepth(&quot;https://example.com/&quot;, 2) will limit it to https://example.com/&lt;path 1&gt;/&lt;path 2&gt;
        //  - etc.
        // In this case, we're limiting to only https://www.reddit.com/r/recipes/&lt;post&gt; so we don't
        // index too many comments/etc. from reddit.
        LimitURLDepth(&quot;https://www.reddit.com/r/recipes&quot;, 1),
    ]
)
</code></pre>
<h2 id="narrowing-down-by-a-specific-topic"><a class="header" href="#narrowing-down-by-a-specific-topic">Narrowing down by a specific topic</a></h2>
<p>Interested in the Rust programming language? Add the <code>rustlang</code> lens which will
index the Rust book, rust docs, crate.io, and other sites that are related to the
programming language and not the Rust game / The Rust Belt / oxidation / etc.</p>
<pre><code class="language-rust noplayground">(
    version: &quot;1&quot;,
    author: &quot;Andrew Huynh&quot;,
    name: &quot;rustlang&quot;,
    description: Some(&quot;Rustlang targeted websites&quot;),
    is_enabled: true,
    domains: [
        // Support for wildcards in domain names
        &quot;*.rust-lang.org&quot;,
        &quot;docs.rs&quot;,
        &quot;rustconf.com&quot;,
        &quot;crates.io&quot;,
        &quot;this-week-in-rust.org&quot;,
        ...
    ],

    urls: [
        // A `$` at the end will *only* index that particular URL and will not go
        // deeper into the site.
        &quot;https://www.reddit.com/r/rust/$&quot;,
        &quot;https://www.reddit.com/r/rust_gamedev/$&quot;,
    ],

    rules: []
)
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="plugins"><a class="header" href="#plugins">Plugins</a></h1>
<p>Spyglass supports loading WebAssembly (Wasm) modules as plugins. A limited rust API is provided to allow the plugins to interact with Spyglass. Note that plugins are in their early stages and the APIs will change over time. Please generate issues with any desired use cases or API requests.</p>
<ul>
<li><a href="usage/plugins/./build.html">Building Plugins</a></li>
<li><a href="usage/plugins/./plugin.html">Writing a Plugin</a></li>
<li><a href="usage/plugins/./install.html">Installing a Plugin</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-plugins"><a class="header" href="#building-plugins">Building Plugins</a></h1>
<p>Currently plugins are a part of the spyglass system and require the same build environment as spyglass. See <a href="usage/plugins/%22./../../../build.html">Spyglass Build Setup</a> for information on how to setup your environment. </p>
<p>The Spyglass makefile can be used to build plugins found in the plugin directory.  Before running a build verify your makefile is properly configured</p>
<blockquote>
<p>Fill in <code>YOUR_PLUGIN_FOLDER_NAME</code> and the folder to your <code>spyglass-dev</code> folder</p>
</blockquote>
<h5 id="windows"><a class="header" href="#windows">Windows</a></h5>
<pre><code class="language-makefile"># Copy the Makefile.dev.template over to Makefile.dev to setup dev related
# variables.
-include Makefile.dev

.PHONY: build-backend build-client build-plugins-dev build-plugins-release \
    build-styles build-release check clippy fmt test test-with-ignored \
    setup-dev setup-dev-linux run-client-dev

TARGET_ARCH := $(shell rustc -Vv | grep host | awk '{print $$2 &quot; &quot;}')

PLUGINS := YOUR_PLUGIN_FOLDER_NAME

# On Windows the dev folder is typically found here
PLUGINS_DEV_FOLDER := C:\\Users\\&lt;YOUR_USER&gt;\\AppData\\Roaming\\athlabs\\spyglass-dev\\data
</code></pre>
<h5 id="mac"><a class="header" href="#mac">Mac</a></h5>
<pre><code class="language-makefile"># Copy the Makefile.dev.template over to Makefile.dev to setup dev related
# variables.
-include Makefile.dev

.PHONY: build-backend build-client build-plugins-dev build-plugins-release \
    build-styles build-release check clippy fmt test test-with-ignored \
    setup-dev setup-dev-linux run-client-dev

TARGET_ARCH := $(shell rustc -Vv | grep host | awk '{print $$2 &quot; &quot;}')

PLUGINS := YOUR_PLUGIN_FOLDER_NAME

# On Mac the dev folder is typically found here
PLUGINS_DEV_FOLDER := /Users/&lt;YOUR_USER&gt;/Library/Application\ Support/com.athlabs.spyglass-dev/
</code></pre>
<blockquote>
<p>To build run the following command</p>
</blockquote>
<pre><code class="language-bash">$&gt; make build-plugins-dev
</code></pre>
<p>This command will build the spyglass plugin and copy it to the supplied PLUGINS_DEV_FOLDER. For more information on how the plugin is installed into spyglass see <a href="usage/plugins/./install.html">Install Plugins</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-plugins"><a class="header" href="#writing-plugins">Writing Plugins</a></h1>
<p>Currently plugins are written in Rust and compiled using the same build system as Spyglass. An example plugin can be found <a href="https://github.com/spyglass-search/spyglass/blob/main/plugins/example-plugin/src/main.rs">here</a> </p>
<h3 id="folder-structure"><a class="header" href="#folder-structure">Folder Structure</a></h3>
<p>The folder structure for the plugin in spyglass follows the outline below</p>
<pre><code>&lt;SPYGLASS_REPO&gt;/plugins/&lt;PLUGIN_NAME&gt;/
                        -------------&gt; .cargo
                        ---------------------&gt; config.toml
                        -------------&gt; src
                        ------------------&gt; main.rs
                        ------------------&gt; manifest.ron
                        -------------&gt; Cargo.toml
</code></pre>
<h5 id="cargotoml"><a class="header" href="#cargotoml">Cargo.toml</a></h5>
<p>The cargo file is a standard rust project cargo file (<a href="https://doc.rust-lang.org/cargo/reference/manifest.html">Manifest Format</a>). Below is from the example plugin. Note that the spyglass-plugin dependency is required, but all other dependencies depend on the type of plugin being written.</p>
<pre><code class="language-toml">[package]
name = &quot;example-plugin&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;
license = &quot;AGPL&quot;

[[bin]]
name = &quot;example-plugin&quot;
path = &quot;src/main.rs&quot;

[dependencies]
serde_json = &quot;1.0&quot;
spyglass-plugin = { path = &quot;../../crates/spyglass-plugin&quot; }
url = &quot;2.2&quot;
</code></pre>
<h5 id="configtoml"><a class="header" href="#configtoml">config.toml</a></h5>
<p>Required configuration file to define the build target</p>
<pre><code class="language-toml">[build]
target = &quot;wasm32-wasi&quot;
</code></pre>
<h5 id="manifestron"><a class="header" href="#manifestron">manifest.ron</a></h5>
<p>The manifest file defines the metadata associated with the plugin.</p>
<pre><code class="language-ron">(
	name: &quot;example-plugin&quot;,
	author: &quot;spyglass-search&quot;,
	description: &quot;Example plugin to provide an example on how to create a plugin.&quot;,
	version: &quot;1&quot;,
	plugin_type: Lens,
	trigger: &quot;example-plugin&quot;,
	// User settings w/ the default value, this will be added the plugin environment
	user_settings: {
	   &quot;API_KEY&quot;: (
	        label: &quot;Example Plugin API Key&quot;,
	        value: &quot;&quot;,
	        form_type: Text,
	        restart_required: false,
	        help_text: Some(&quot;Example with custom string configuration&quot;)
	    ),
	    &quot;ENABLE_API&quot;: (
	        label: &quot;Example Plugin Enable API boolean&quot;,
			value: &quot;&quot;,
			form_type: Bool,
			restart_required: false,
			help_text: Some(&quot;Example with custom boolean configuration&quot;)
		),
	}
)
</code></pre>
<p><strong>Name</strong>: The name of the plugin<br />
<strong>Author</strong>: The developer of the plugin<br />
<strong>Description</strong>: Description shown in the GUI used to explain what the plugin does<br />
<strong>Version</strong>: Plugin version <br />
<strong>Plugin_type</strong>: Currently we only support the <code>Lens</code> plugin type<br />
<strong>Trigger</strong>: The lens trigger automatically used in search GUI<br />
<strong>User_settings</strong>: Optional user settings. This can be used to define configuration needed by the plugin. This configuration is used by the GUI to provide input fields in the <code>User Settings</code> menu. All configured values are passed to the plugin through environmental variables. </p>
<h5 id="mainrs"><a class="header" href="#mainrs">main.rs</a></h5>
<p>The main.rs is where the plugin code begins. The full source of an example plugin can be found <a href="https://github.com/spyglass-search/spyglass/blob/main/plugins/example-plugin/src/main.rs">here</a> . Below are snippets of code from the example plugin.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use spyglass_plugin::*;

#[derive(Default)]
struct Plugin;

register_plugin!(Plugin);
<span class="boring">}
</span></code></pre></pre>
<p>The most basic start of a plugin is defining a struct and registering it with the system using the <code>register_plugin!</code> macro. After the plugin has been defined and registered the <code>Plugin</code> struct needs to implement the <code>SpyglassPlugin</code> trait. </p>
<blockquote>
<p>The <code>SpyglassPlugin</code> trait defines the set of required methods for a plugin</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub trait SpyglassPlugin {

/// Initial plugin load, setup any configuration you need here as well as
/// subscribe to specific events.
fn load(&amp;mut self);

/// Asynchronous updates for plugin events
fn update(&amp;mut self, event: PluginEvent);
}
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>Implement the <code>SpyglassPlugin</code> trait and define the plugins functionality</p>
</blockquote>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl SpyglassPlugin for Plugin {

    fn load(&amp;mut self) {
		let _ = subscribe_for_updates();
	}

	fn update(&amp;mut self, event: PluginEvent) {

		match event {
			PluginEvent::IntervalUpdate =&gt; {
				//DO STUFF HERE
			}
			PluginEvent::HttpResponse { url: _, result } =&gt; {
			   // DO STUFF HERE
			}
			PluginEvent::DocumentResponse {
				request_id: _,
				page_count: _,
				page: _,
				documents,
				} =&gt; {
				// DO STUFF HERE
			}
		}
	}
}
<span class="boring">}
</span></code></pre></pre>
<p>The <code>load</code> method is called each time the plugin is loaded. Plugins are loaded when Spyglass starts and when a user toggles the plugin to the enabled state. </p>
<p>The <code>update</code> method is called when asynchronous events occur. This method will only be called in response to an action taken by the plugin. Example calling <code>subscribe_for_updates()</code> will trigger the update method to be called with the <code>IntervalUpdate</code> event every 10 minutes</p>
<h4 id="api-helper-methods"><a class="header" href="#api-helper-methods">API Helper Methods</a></h4>
<p>Following is the list of API methods available for plugins. Note plugins are in active development and the API can change. <a href="https://github.com/spyglass-search/spyglass/blob/main/crates/spyglass-plugin/src/shims.rs">Shims</a> is a good place to check to see the current methods available.</p>
<blockquote>
<p>Helper Functions</p>
</blockquote>
<p>Note that all helper functions are asynchronous. All requested data will be provided through the update method asynchronously.</p>
<p>Log is used to write a string message into the server log. This is used for debugging. Note that due to the nature of the wasm environment <code>println!</code> cannot be used</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn log(msg: &amp;str)
<span class="boring">}
</span></code></pre></pre>
<p>Enqueue all is used to add urls to the list of urls to crawl and index. After calling this method the Spyglass system will add the urls in question to the crawl queue and index the documents as part of normal processing</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn enqueue_all(urls: &amp;[String])
<span class="boring">}
</span></code></pre></pre>
<p>Delete doc will delete a document from the index. This can be used to remove documents that were added by the plugin, but are no longer needed.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn delete_doc(url: &amp;str)
<span class="boring">}
</span></code></pre></pre>
<p>Modify tags is used to add or remove tags for all documents that match the query. This allows plugins to add custom tags to documents found in the index.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn modify_tags(query: DocumentQuery, modification: TagModification) -&gt; Result&lt;(), ron::Error&gt;
<span class="boring">}
</span></code></pre></pre>
<p>Query documents can be used to access documents found in the index based on the document query.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn query_documents(query: DocumentQuery) -&gt; Result&lt;(), ron::Error&gt;
<span class="boring">}
</span></code></pre></pre>
<p>Subscribe for documents is the same as query documents, but will run the query at a regular interval and send the results to the update method. This is useful if the plugin is designed to watch for new documents and update tags for those documents. </p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn subscribe_for_documents(query: DocumentQuery) -&gt; Result&lt;(), ron::Error&gt;
<span class="boring">}
</span></code></pre></pre>
<p>Subscribe for updates will tell spyglass to send an interval update to the plugin every 10 minutes.  This can be used to allow the plugin to run updates at a regular interval.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn subscribe_for_updates() -&gt; Result&lt;(), ron::Error&gt;
<span class="boring">}
</span></code></pre></pre>
<p>Add document will add a document to the index. If a document with the same <code>url</code> already exists the document will be updated with the provided contents</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub fn add_document(documents: Vec&lt;DocumentUpdate&gt;, tags: Vec&lt;Tag&gt;) -&gt; Result&lt;(), ron::Error&gt;
<span class="boring">}
</span></code></pre></pre>
<blockquote>
<p>Helper Structs</p>
</blockquote>
<p><code>Http</code> is an available struct that can be used to make http requests. Due to the type of wasm module used popular http libraries like reqwest will not work, instead we provide a basic Http helper that can be used for requests. Just like the helper functions all requests return results asynchronously through the <code>update</code> method.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Http {
	pub fn get(url: &amp;str, headers: Vec&lt;(String, String)&gt;)
	pub fn request(url: &amp;str) -&gt; HttpRequestBuilder 
}
<span class="boring">}
</span></code></pre></pre>
<p><code>Http::get(&quot;...&quot;, vec![])</code></p>
<p>Generates a get request for the specified url. The request is the same as calling <code>Http::request(url).headers(headers).get().run()</code></p>
<p>For more options in building http requests the <code>request</code> method can be used.
<code>Http::request(&quot;...&quot;)</code></p>
<p><code>HttpRequestBuilder</code> is a helper used to build an http request.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl HttpRequestBuilder {
	// Builds a request that is a get request
	pub fn get(&amp;self) -&gt; Self 
	// Builds a request that is a put request
	pub fn put(&amp;self) -&gt; Self 
	// Builds a request that is a post request
	pub fn post(&amp;self) -&gt; Self 
	// Builds a request that is a patch request
	pub fn patch(&amp;self) -&gt; Self 
	// Builds a request that is a delete request
	pub fn delete(&amp;self) -&gt; Self 
	// Adds a body to the request
	pub fn body(&amp;self, new_body: String) -&gt; Self 
	// Adds headers to the request
	pub fn headers(&amp;self, new_headers: Vec&lt;(String, String)&gt;) -&gt; Self 
	// Add basic authentication to the request
	pub fn basic_auth(&amp;self, key: &amp;str, val: Option&lt;String&gt;) -&gt; Self 
	// Adds bearer auth to the request
	pub fn bearer_auth(&amp;self, key: &amp;str) -&gt; Self 
	// Runs the http request. Results will be sent to the update method
	pub fn run(&amp;self) 
}
<span class="boring">}
</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installing-plugins"><a class="header" href="#installing-plugins">Installing Plugins</a></h1>
<p>Plugins are located in the <code>plugins</code> subfolder of the spyglass data directory. To install a plugin a folder with the same name as the plugin must be placed in the <code>plugins</code> folder and two files added to the plugin folder. The files required for a plugin are the plugin file <code>main.wasm</code> and the manifest file <code>manifest.ron</code></p>
<p>The data directory (<code>DATA_FOLDER</code> in the example below) is configurable and can be found in the user settings GUI under <code>Data Directory</code></p>
<p>The folder structure is as follows</p>
<pre><code>&lt;DATA_FOLDER&gt;\plugins\&lt;PLUGIN_NAME&gt;
                            ------&gt; main.wasm
                            ------&gt; manifest.ron
</code></pre>
<h5 id="mainwasm"><a class="header" href="#mainwasm">main.wasm</a></h5>
<p>The wasm file is the web assemble module that will be loaded into spyglass. </p>
<h5 id="manifestron-1"><a class="header" href="#manifestron-1">manifest.ron</a></h5>
<p>The manifest file is the configuration file that defines details about the plugin and the list of settings needed for the plugin.</p>
<h3 id="install"><a class="header" href="#install">Install</a></h3>
<p>To install a plugin simply place the <code>main.wasm</code> file and the <code>manifest.ron</code> files into a subfolder of the plugins folder. The proper structure can be seen above. </p>
<p>After copying the files into the proper directory the application will need to be restarted. After restart the plugin should be listed in the <code>Plugins</code> configuration section. The plugin will need to be enabled in the GUI to be loaded. </p>
<p>Note that if the plugin does not show up in the <code>Plugins</code> list there was likely an error reading the plugin configuration. Any errors reading the configuration can be found in the server log. </p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="settings"><a class="header" href="#settings">Settings</a></h1>
<p>The <code>settings.ron</code> file can be found by &quot;Show Settings folder&quot;. If there is no
file found in their directory on startup, a default one will be created.</p>
<pre><code class="language-ron">(
    // The max number of pages to index per domain
    domain_crawl_limit: Finite(1000),
    // The max number of crawlers per domain
    inflight_domain_limit: Finite(2),
    // The max number of crawlers in total
    inflight_crawl_limit: Finite(10),
    // Not used... yet!
    run_wizard: false,
    // Not used... yet!
    allow_list: [],
    // Domains to completely ignore, regardless of the lenses you have installed.
    block_list: [
      &quot;web.archive.org&quot;,
      &quot;w3schools.com&quot;
    ],
    // Shortcut to launch the search bar
    shortcut: &quot;CmdOrCtrl+Shift+/&quot;,
    // Where to store your index and index metadata
    // The exact default location is dependent on your OS
    //
    // - NOTE: If you're updating this for Windows, the path needs to use double backward slashes
    //   like so: &quot;E:\\spyglass\\data&quot;
    // - Linux &amp; macOS uses paths like below
    //
    data_directory: &quot;/Users/&lt;username&gt;/Library/Application Support/com.athlabs.spyglass&quot;,
    // By default, Spyglass will only crawl things as specified in your lenses. If you want
    // to follow links without regard to those rules, set this to true.
    crawl_external_links: false,
    // Disables sending any telemetry. Currently the only telemetry is for bug/error reporting.
    disable_telemetry: false,
    // Disables launching the application when your computer first boots up.
    disable_autolaunch: false,
    filesystem_settings: (
        enable_filesystem_scanning: true,
        watched_paths: [
            &quot;&lt;PATH TO WATCH&gt;&quot;,
        ],
        supported_extensions: [
            &quot;docx&quot;,
            &quot;html&quot;,
            &quot;md&quot;,
            &quot;txt&quot;,
            &quot;ods&quot;,
            &quot;xls&quot;,
            &quot;xlsx&quot;,
        ],
    ),
    // Port that the search daemon runs on. Change this if you have another service
    // already running at this port number.
    port: 4664,
    user_action_settings: (
        actions: [
            (
                label: &quot;Copy URL to Clipboard&quot;,
                status_msg: Some(&quot;Copying...&quot;),
                action: CopyToClipboard(&quot;{{ open_url }}&quot;),
                key_binding: &quot;CmdOrCtrl+C&quot;,
            ),
        ],
        context_actions: [],
    ),
    audio_settings: (
        enable_audio_transcription: false,
    ),
)
</code></pre>
<h3 id="updating-the-shortcut"><a class="header" href="#updating-the-shortcut">Updating the Shortcut</a></h3>
<p>The Shortcut can be modified directly through the <code>User Settings</code> menu. The field will automatically record the keystrokes used. You can also type in the desired shortcut using the information below.</p>
<p>To update the shortcut combine the following modifiers w/ an appropriate
<a href="https://docs.rs/tao/0.8.3/tao/keyboard/enum.KeyCode.html">keycode</a> combining each key with a &quot;+&quot;.</p>
<p>Supported Modifiers:</p>
<ul>
<li>&quot;Option&quot; / &quot;Alt&quot;</li>
<li>&quot;Control&quot; / &quot;Ctrl&quot;</li>
<li>&quot;Command&quot; / &quot;Cmd&quot; / &quot;Super&quot;</li>
<li>&quot;Shift&quot;</li>
<li>&quot;CmdOrCtrl&quot;</li>
</ul>
<p>Examples:</p>
<ul>
<li>&quot;CmdOrCtrl+/&quot; =&gt; Launches the app w/ <code>Cmd</code> or <code>Ctrl</code> + <code>/</code></li>
<li>&quot;CmdOrCtrl+Shift+/&quot; =&gt; Launches the app w/ <code>Cmd</code> or <code>Ctrl</code> + <code>Shift</code> + <code>/</code></li>
<li>&quot;Shift+4&quot; =&gt; Launches the app w/ <code>Shift</code> + <code>4</code></li>
</ul>
<p>NOTE: Shortcuts are allowed to have any number of modifiers but only a <em>single</em> key.
For example, <code>Shift+4</code> will work but not <code>Shift+4+2</code></p>
<h3 id="updating-user-actions"><a class="header" href="#updating-user-actions">Updating User Actions</a></h3>
<p>Currently user actions must be configured directly in the settings configuration file. The user actions configuration allows a user to define any number of actions that can be taken on a selected search result. When a result is selected the actions menu provides the list of currently available actions.</p>
<p>There are currently three types of actions that can be configured. </p>
<ul>
<li>
<p><strong>OpenApplication</strong> <br />
Open application takes two arguments the application to open and the path to pass to the application. One Windows and Linux the application is any application that is in the systems path. On Mac the application must be a valid application in the application folder. The path is the path you want to open with the application. The below example works on Windows to open the selected file in Visual Studio Code</p>
<pre><code class="language-ron">(
    label: &quot;Open In Vs Code&quot;,
    status_msg: Some(&quot;Opening...&quot;),
    action: OpenApplication(&quot;code&quot;, &quot;{{ open_url }}&quot;),
    key_binding: &quot;CmdOrCtrl+O&quot;,
)
</code></pre>
</li>
<li>
<p><strong>OpenUrl</strong> <br />
Open Url works the same as OpenApplication but only takes a single argument, the url to open. This action utilizes the default system application to open the url. Note that by default pressing <code>enter</code> on a selected result executes the OpenUrl action with the {{ open_url }} argument. This custom action is useful if you want to modify the url. The below example modifies the url to work with Obsidian to open a markdown file that is part of an Obsidian vault</p>
<pre><code class="language-ron">(
    label: &quot;Open In Vault&quot;,
    status_msg: Some(&quot;Opening...&quot;),
    action: Open(&quot;obsidian://open?vault={{slice_path url 5 count=1}}&amp;file={{slice_path url 6}}&quot;),
    key_binding: &quot;CmdOrCtrl+V&quot;,
)
</code></pre>
</li>
<li>
<p><strong>CopyToClipboard</strong> <br />
The copy to clipboard action is used to copy the argument to the clipboard. This allows the user to copy the url or other information about the document to the clipboard. The below example is part of the default configuration and is used to copy the documents url to the clipboard</p>
<pre><code class="language-ron">(
    label: &quot;Copy URL to Clipboard&quot;,
    status_msg: Some(&quot;Copying...&quot;),
    action: CopyToClipboard(&quot;{{ open_url }}&quot;),
    key_binding: &quot;CmdOrCtrl+C&quot;,
)
</code></pre>
</li>
</ul>
<h4 id="action-configuration"><a class="header" href="#action-configuration">Action Configuration</a></h4>
<p>The action configuration as seen above is made up of four properties </p>
<ul>
<li>label - This is the label shown on the action menu</li>
<li>status_msg - This is the message shown in the bottom left of the search window when the action is being executed</li>
<li>action - This is the action with arguments that should be executed</li>
<li>key_binding - The key binding is the keyboard shortcut that will trigger the action. This allows the keyboard to be used instead of selecting the action with the mouse</li>
</ul>
<p>As part of the action configuration, templates are typically used to define arguments. The template syntax uses the <a href="https://docs.rs/handlebars/latest/handlebars/">handlebars</a> template framework. All of the default behavior defined in the <a href="https://docs.rs/handlebars/latest/handlebars/">handlebars</a> documentation is supported as well as one custom function.</p>
<h4 id="context-action-configuration"><a class="header" href="#context-action-configuration">Context Action Configuration</a></h4>
<p>Actions configured under the <code>actions</code> section are available for all search results. Actions defined in the <code>context_actions</code> section will only be available for results that match the context. Note that the same key binding for an action and context action can be used and the context action will override the action when triggering from a keyboard. </p>
<p>To configure context actions define a context and the action definition </p>
<pre><code class="language-ron">(
    context: (
        has_tag: Some([
            (&quot;type&quot;, &quot;directory&quot;),
        ]),
        has_tag_type: None,
        exclude_tag: None,
        exclude_tag_type: None,
        url_like: None,
    ),
    actions: [
        (
            label: &quot;Open in VS Code&quot;,
            status_msg: None,
            action: OpenApplication(&quot;code&quot;, &quot;{{ open_url }}&quot;),
            key_binding: &quot;CmdOrCtrl+Enter&quot;,
        ),
    ],
)
</code></pre>
<p>Multiple context actions can be defined and for every matching context one or more actions can be defined. The action definition follows the standard action definition. The context definition is as follows</p>
<ul>
<li>has_tag - Optional list of tags to match against the search result</li>
<li>has_tag_type - Optional list of tag types to match against </li>
<li>exclude_tag - Optional list of tags to exclude. Any search result that has one of these tags will not have these actions available</li>
<li>exclude_tag_type - Optional list of tag types. Any search result that has a tag of this type will not have these actions available</li>
<li>url_like - Optional list of urls that must match the url of the search result. </li>
</ul>
<p>In the example above that action to open the url in VS Code would only be valid for search results that have the tag <code>type=directory</code> </p>
<h4 id="template-fields"><a class="header" href="#template-fields">Template Fields</a></h4>
<p>The template fields available for each entry are as follows</p>
<ul>
<li>doc_id - The unique id of the document</li>
<li>crawl_uri - The uri used to crawl the result</li>
<li>domain - The domain for the result</li>
<li>title - The title of the result</li>
<li>description - The description of the result</li>
<li>url - The url for the result</li>
<li>open_url - The url used by default to open the result, this is a normalized url for the os</li>
<li>tags - The list of tags for the result</li>
<li>score - The documents score</li>
<li>url_schema - The schema of the url</li>
<li>url_userinfo - The user info for the url if present</li>
<li>url_parent - The parent of the url</li>
<li>url_port - The port of the url</li>
<li>url_path - The full url path as a list of strings</li>
<li>url_path_length - The length of the path</li>
<li>url_query - The query string for the url if present</li>
</ul>
<h4 id="custom-function"><a class="header" href="#custom-function">Custom Function</a></h4>
<p><strong>slice_path</strong> custom helper function has been added to help select parts of a path. The function requires a valid url. The syntax is as follows</p>
<p><code>{{slice_path &lt;Template Var&gt; &lt;Start Index&gt; [&lt;End Index&gt;] [count=&lt;Count&gt;] [full_uri=&lt;true|false&gt;]}}</code></p>
<ul>
<li>slice_path - is the function name to execute</li>
<li>&lt;Template Var&gt; - is required and is the field to access from the selected search result, typically <code>url</code></li>
<li>&lt;Start Index&gt; - is required and is the index to start from (0 indexed)</li>
<li>[&lt;End Index&gt;] - Optional end index, if not defined and count is also not defined then the last index in the path is used</li>
<li>[count=&lt;Count&gt;] - Optional count is used to define the number of elements to access. This is helpful when the start index is a negative number so the end index cannot be known statically</li>
<li>[full_uri=&lt;true|false&gt;] - Optional property used to identify if the output of slice_path should just be the path or the full uri.</li>
</ul>
<p>Examples</p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url 1}}</code> <br />
<strong>Output</strong> - b/c/d/e </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url -1}}</code> <br />
<strong>Output</strong> - e </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url -2}}</code> <br />
<strong>Output</strong> - d/e </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url 1 3}}</code> <br />
<strong>Output</strong> - b/c/d </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url 1 -1}}</code> <br />
<strong>Output</strong> - b/c/d </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url -2 count=1}}</code> <br />
<strong>Output</strong> - d </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url -2 count=2}}</code> <br />
<strong>Output</strong> - d/e </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url 0 -1 full_uri=true}}</code> <br />
<strong>Output</strong> - http://test.com/a/b/c/d </p>
<p>url = http://test.com/a/b/c/d/e <br />
<code>{{slice_path url 0 -2 full_uri=true}}</code> <br />
<strong>Output</strong> - http://test.com/a/b/c </p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
    </body>
</html>
